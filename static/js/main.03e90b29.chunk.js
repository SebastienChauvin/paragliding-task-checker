(this["webpackJsonpparagliding-task-checker"]=this["webpackJsonpparagliding-task-checker"]||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(33),r=n.n(i),o=(n(68),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))}),s=n(3),l=(n(69),n(5)),d=n(14),j=n.n(d),u=n(35),h=n(63),p=n(1),b=n(72),f=b.compress,O=b.decompress,g={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa0F",color:"#bdbdbd",outline:"none",margin:10,transition:"border .24s ease-in-out"},x={borderColor:"#2196f3"},m={borderColor:"#00e676"},v={borderColor:"#ff1744"};function y(e){var t=Object(l.a)(Object(l.a)({},g),{},{color:"green",borderColor:"green"}),n=Object(c.useState)(),i=Object(s.a)(n,2),r=i[0],o=i[1],d=function(){var e=a.a.useState((function(){return window.location.hash})),t=Object(s.a)(e,2),n=t[0],c=t[1],i=a.a.useCallback((function(){c(window.location.hash)}),[]);a.a.useEffect((function(){return window.addEventListener("hashchange",i),function(){window.removeEventListener("hashchange",i)}}),[]);var r=a.a.useCallback((function(e){e!==n&&(window.location.hash=e)}),[n]);return[n,r]}(),b=Object(s.a)(d,2),y=b[0],w=b[1];Object(c.useEffect)((function(){function t(){return(t=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!r){e.next=5;break}return e.next=4,f(r);case 4:t=e.sent;case 5:w(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.fileSetter(r),e.inUrl&&function(){t.apply(this,arguments)}()}),[r,e]),Object(c.useEffect)((function(){function t(){return(t=Object(u.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,O(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}y&&e.inUrl&&function(e){t.apply(this,arguments)}(y)}),[y]);var S=Object(p.jsx)("div",{className:"container",style:t,children:Object(p.jsx)("p",{children:e.message+" \u2713"})}),C=function(e){var t=Object(h.a)({onDrop:function(){var t=Object(u.a)(j.a.mark((function t(n){var c,a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=6;break}return c=n[0],t.next=4,c.text();case 4:a=t.sent,e.setter(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),n=t.getRootProps,a=t.getInputProps,i=t.isDragActive,r=t.isDragAccept,o=t.isDragReject,s=Object(c.useMemo)((function(){return Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},g),i?x:{}),r?m:{}),o?v:{})}),[i,o,r]);return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",Object(l.a)(Object(l.a)({},n({style:s})),{},{children:[Object(p.jsx)("input",Object(l.a)({},a())),Object(p.jsx)("p",{children:e.message})]}))})}({message:e.message,setter:o});return e.file?S:C}var w=n(135),S=n(133),C=n(136),k=n(134),E=(n(103),n(44)),D=n.n(E),I=n(20);function N(e){return new Date(1e3*e).toISOString().substr(12,7)}var P=n(105),T=n(108),z={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"2px",margin:"2px",borderColor:"red",color:"red",borderStyle:"solid"},R={display:"flex",flexDirection:"row",alignSelf:"stretch",height:"100vh"};function A(e){var t,n,a=e.name,i=e.wing,r=Object(c.useState)(1),o=Object(s.a)(r,2),d=o[0],j=o[1],u=Object(c.useState)(!1),h=Object(s.a)(u,2),b=h[0],f=h[1],O=Object(c.useState)(!1),g=Object(s.a)(O,2),x=(g[0],g[1]),m=Object(c.useState)(),v=Object(s.a)(m,2),y=v[0],E=v[1];Object(c.useEffect)((function(){try{E(P.parse(e.igc,{lenient:!0}))}catch(t){console.error("Cannot parse",e.igc,t)}}),[e.igc]);var A=0,F=[],W=[],G=[],L=[],B=0,M=0;if(!y)return Object(p.jsx)("span",{children:"Fichier IGC ?"});for(var U=0;U<y.fixes.length&&U/y.fixes.length<d;U++){var Z=y.fixes[U],H=I.turnpoints[A];if(G.push([Z.latitude,Z.longitude]),H)if(T.getDistance(Z,H.waypoint)<H.radius){L.push(Z.time);var J=(D()("1970-01-01 ".concat(Z.time,"Z"))-D()("1970-01-01 ".concat(L[0],"Z")))/1e3,V="ESS"===H.type;(V||!B&&A===I.turnpoints.length-1)&&(V&&(M=A),B=J),F.push(Object(p.jsxs)("div",{style:Object(l.a)(Object(l.a)({},z),{},{color:"green",borderColor:"green",zIndex:U}),children:[Object(p.jsx)("small",{style:{color:"white"},children:H.waypoint.description}),Object(p.jsx)("small",{children:Z.time}),Object(p.jsx)("small",{style:{opacity:0===A?0:1,color:V?"white":"grey"},children:N(J)})]},"turnpoint-"+A));var q=[H.waypoint.lat,H.waypoint.lon];W.push(Object(p.jsx)(w.a,{center:q,pathOptions:{fillColor:"blue",color:"transparent",opacity:.25},radius:H.radius},"turnpoint-circle-"+A)),A++}}var Y=I.turnpoints.length===A,K={igc:e.igc,valid:Y,date:y.date,name:a,wing:i,duration:B};b||(fetch("https://lnk30ei5aj.execute-api.eu-west-3.amazonaws.com/dev/save",{method:"POST",body:JSON.stringify(K)}).then((function(e){x(e.ok)})).catch((function(e){return console.error("sending",e)})),f(!0));var X=function(e){F.push(Object(p.jsx)("pre",{style:{fontSize:14},children:e}))};X("Heure d\xe9but: ".concat(L[0])),M&&X("Heure ESS: ".concat(L[M])),Y?(X("Heure fin: ".concat(L.slice(-1)[0])),X("Dur\xe9e task: ".concat(N(B)))):X("Non valide"),X(b?"Envoy\xe9":", re\xe7u");for(var Q=I.turnpoints.length-1;Q>=A;Q--){var $="gray",_="FFF",ee=.25;Q===A&&($="orange",_="orange",ee=1);var te=I.turnpoints[Q];F.splice(A,0,Object(p.jsx)("div",{style:Object(l.a)(Object(l.a)({},z),{},{borderColor:$,zIndex:Q}),children:Object(p.jsx)("small",{children:te.waypoint.description})},"turnpoint-"+Q));var ne=[te.waypoint.lat,te.waypoint.lon];W.push(Object(p.jsx)(w.a,{center:ne,pathOptions:{color:$,fillColor:_,opacity:ee},radius:te.radius},"turnpoint-circle-"+Q))}var ce=I.turnpoints[0],ae=[ce.waypoint.lat,ce.waypoint.lon],ie=null!==(t=null===(n=y.fixes[Math.round(y.fixes.length*d-1)])||void 0===n?void 0:n.time)&&void 0!==t?t:"Nan";return Object(p.jsxs)("div",{style:R,children:[Object(p.jsxs)("div",{style:{display:"flex",flexDirection:"column",overflow:"auto"},children:[Object(p.jsx)("h2",{children:"Challenge Charance"}),F]}),Object(p.jsxs)("div",{className:"rightHandContainer",style:{alignSelf:"stretch",width:"100%",display:"flex",flexDirection:"column",height:"100vh"},children:[Object(p.jsx)("div",{className:"mapContainer",style:{flexGrow:1,display:"flex"},children:Object(p.jsxs)(S.a,{center:ae,zoom:13,scrollWheelZoom:!1,children:[Object(p.jsx)(C.a,{attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',url:"https://{s}.tile.jawg.io/jawg-terrain/{z}/{x}/{y}{r}.png?access-token=OCSVqPtVG4tEq4zlKGa0sA3LW6bC5l528PJhTuBSPZ5BPvbjemWIyzaHd15iYV11"})," ",W,Object(p.jsx)(k.a,{positions:G})]})}),Object(p.jsxs)("div",{className:"flightProgress",style:{height:"80px",backgroundColor:"blue",display:"flex"},children:[Object(p.jsx)("input",{type:"range",min:"1",max:"100",class:"slider",id:"myRange",style:{flexGrow:1},value:100*d,onChange:function(e){var t=e.target.value/100;j(t)}}),Object(p.jsx)("p",{children:ie})]})]})]})}var F={display:"flex",flexDirection:"row",alignItems:"center"};var W=function(){var e=Object(c.useState)(),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(),r=Object(s.a)(i,2),o=r[0],l=r[1],d=Object(c.useState)(""),j=Object(s.a)(d,2),u=j[0],h=j[1],b=Object(c.useState)(!1),f=Object(s.a)(b,2),O=f[0],g=f[1];Object(c.useEffect)((function(){var e;l(null!==(e=localStorage.getItem("name"))&&void 0!==e?e:""),h(localStorage.getItem("wing"))}),[]),Object(c.useEffect)((function(){localStorage.setItem("name",o)}),[o]),Object(c.useEffect)((function(){localStorage.setItem("wing",u)}),[u]);var x=new URL(window.location);x.hash="";var m={margin:10,padding:5,fontSize:18};return O?Object(p.jsx)(A,{igc:n,name:o,wing:u}):Object(p.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[Object(p.jsx)("h1",{children:Object(p.jsx)("a",{href:x.toString(),style:{color:"white"},children:"Challenge Charance"})}),Object(p.jsx)("div",{style:F,children:Object(p.jsxs)("form",{action:"#",children:[Object(p.jsx)(y,{file:n,fileSetter:a,message:"Fichier igc"}),Object(p.jsx)("input",{style:m,type:"text",value:o,onChange:function(e){return l(e.target.value)},placeholder:"Nom Pr\xe9nom"}),Object(p.jsxs)("select",{style:m,name:"wing",onChange:function(e){return h(e.target.value)},value:u,children:[Object(p.jsx)("option",{value:"",children:"-"}),Object(p.jsx)("option",{value:"A",children:"EN-A"}),Object(p.jsx)("option",{value:"B",children:"EN-B"}),Object(p.jsx)("option",{value:"C",children:"EN-C"}),Object(p.jsx)("option",{value:"D",children:"EN-D"}),Object(p.jsx)("option",{value:"CCC",children:"CCC"})]}),Object(p.jsx)("br",{}),Object(p.jsx)("input",{style:m,type:"submit",value:"Envoyer",disabled:!o||!u||!n,onClick:function(){g(!0)}})]})})]})},G=n(2),L=n(25),B="https://lnk30ei5aj.execute-api.eu-west-3.amazonaws.com/dev/ranking/";function M(e){var t=e.type,n=Object(c.useState)(null),a=Object(s.a)(n,2),i=a[0],r=a[1],o=Object(c.useState)(!1),l=Object(s.a)(o,2),d=l[0],j=l[1];return d||(console.log("loading"),j(!0),fetch("".concat(B).concat(t),{method:"GET"}).then((function(e){return e.json()})).then((function(e){r(e.list),console.log(i)})).catch((function(e){return console.error("receiving",e)}))),Object(p.jsxs)("div",{style:{width:"600px",float:"left"},children:[Object(p.jsxs)("h2",{children:["Classement ",t]}),Object(p.jsx)("table",{style:{padding:10,textAlign:"left"},children:null===i||void 0===i?void 0:i.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{style:{paddingRight:30},children:[t+1,"."]}),Object(p.jsx)("td",{style:{paddingRight:30},children:e.name}),Object(p.jsx)("td",{style:{paddingRight:30,fontSize:20},children:N(e.duration)}),Object(p.jsx)("td",{style:{paddingRight:30,fontSize:16},children:e.date})]})}))})]})}function U(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],a=t[1],i=Object(c.useState)(!1),r=Object(s.a)(i,2),o=r[0],l=r[1];return o||(console.log("loading"),l(!0),fetch("".concat(B,"attempts"),{method:"GET"}).then((function(e){return e.json()})).then((function(e){a(e.list),console.log(n)})).catch((function(e){return console.error("receiving",e)}))),Object(p.jsxs)("div",{style:{width:"600px",float:"left"},children:[Object(p.jsx)("h2",{children:"Nombre de vols valides"}),Object(p.jsx)("table",{style:{padding:10,textAlign:"left"},children:null===n||void 0===n?void 0:n.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsxs)("td",{style:{paddingRight:30},children:[t+1,"."]}),Object(p.jsx)("td",{style:{paddingRight:30},children:e.name}),Object(p.jsx)("td",{style:{paddingRight:30,fontSize:16},children:e.attempts})]})}))})]})}function Z(){return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)(M,{type:"A"}),Object(p.jsx)(M,{type:"B"}),Object(p.jsx)(M,{type:"C"}),Object(p.jsx)(M,{type:"D"}),Object(p.jsx)(M,{type:"CCC"}),Object(p.jsx)(U,{})]}),Object(p.jsx)("div",{style:{backgroundColor:"#ddd",padding:20,marginTop:30},children:Object(p.jsx)(L.b,{to:"/declaration",children:"Declarer un vol"})})]})}function H(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)("header",{className:"App-header",children:Object(p.jsxs)(G.c,{children:[Object(p.jsx)(G.a,{path:"/",element:Object(p.jsx)(Z,{})}),Object(p.jsx)(G.a,{path:"/declaration",element:Object(p.jsx)(W,{})})]})})})}r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(L.a,{hashType:"noslash",children:Object(p.jsx)(H,{})})}),document.getElementById("root")),o()},20:function(e){e.exports=JSON.parse('{"version":1,"taskType":"CLASSIC","turnpoints":[{"radius":200,"waypoint":{"lon":6.0208001136779785,"lat":44.56801986694336,"altSmoothed":1517,"name":"WPT1","description":"D\xe9co","isUnknown":true},"type":"SSS"},{"radius":1500,"waypoint":{"lon":6.046289920806885,"lat":44.591468811035156,"altSmoothed":1643,"name":"WPT2","description":"Br\xeache","isUnknown":true}},{"radius":4450,"waypoint":{"lon":5.932980060577393,"lat":44.627140045166016,"altSmoothed":2647,"name":"WPT3","description":"Clappe","isUnknown":true}},{"radius":550,"waypoint":{"lon":5.994440078735352,"lat":44.551109313964844,"altSmoothed":1058,"name":"WPT4","description":"Corr\xe9o","isUnknown":true},"type":"ESS"},{"radius":3600,"waypoint":{"lon":6.046289920806885,"lat":44.591468811035156,"altSmoothed":1643,"name":"WPT2","description":"D\xe9co","isUnknown":true}}],"sss":{"type":"ELAPSED-TIME","direction":"EXIT","timeGates":["05:00:00Z"]},"goal":{"type":"CYLINDER","deadline":"21:00:00Z"},"earthModel":"WGS84"}')},68:function(e,t,n){},69:function(e,t,n){},78:function(e,t){},80:function(e,t){}},[[130,1,2]]]);
//# sourceMappingURL=main.03e90b29.chunk.js.map