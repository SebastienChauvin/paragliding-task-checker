(this["webpackJsonpparagliding-task-checker"]=this["webpackJsonpparagliding-task-checker"]||[]).push([[0],{130:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(33),i=n.n(c),o=(n(68),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),c(e),i(e)}))}),s=n(3),l=(n(69),n(5)),d=n(14),u=n.n(d),j=n(35),p=n(63),h=n(1),b=n(72),f=b.compress,O=b.decompress,x={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa0F",color:"#bdbdbd",outline:"none",margin:10,transition:"border .24s ease-in-out"},g={borderColor:"#2196f3"},m={borderColor:"#00e676"},v={borderColor:"#ff1744"};function y(e){var t=Object(l.a)(Object(l.a)({},x),{},{color:"green",borderColor:"green"}),n=Object(a.useState)(),c=Object(s.a)(n,2),i=c[0],o=c[1],d=function(){var e=r.a.useState((function(){return window.location.hash})),t=Object(s.a)(e,2),n=t[0],a=t[1],c=r.a.useCallback((function(){a(window.location.hash)}),[]);r.a.useEffect((function(){return window.addEventListener("hashchange",c),function(){window.removeEventListener("hashchange",c)}}),[]);var i=r.a.useCallback((function(e){e!==n&&(window.location.hash=e)}),[n]);return[n,i]}(),b=Object(s.a)(d,2),y=b[0],w=b[1];Object(a.useEffect)((function(){function t(){return(t=Object(j.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!i){e.next=5;break}return e.next=4,f(i);case 4:t=e.sent;case 5:w(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.fileSetter(i),e.inUrl&&function(){t.apply(this,arguments)}()}),[i,e]),Object(a.useEffect)((function(){function t(){return(t=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.next=3,O(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}y&&e.inUrl&&function(e){t.apply(this,arguments)}(y)}),[y]);var S=Object(h.jsx)("div",{className:"container",style:t,children:Object(h.jsx)("p",{children:e.message+" \u2713"})}),C=function(e){var t=Object(p.a)({onDrop:function(){var t=Object(j.a)(u.a.mark((function t(n){var a,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=6;break}return a=n[0],t.next=4,a.text();case 4:r=t.sent,e.setter(r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),n=t.getRootProps,r=t.getInputProps,c=t.isDragActive,i=t.isDragAccept,o=t.isDragReject,s=Object(a.useMemo)((function(){return Object(l.a)(Object(l.a)(Object(l.a)(Object(l.a)({},x),c?g:{}),i?m:{}),o?v:{})}),[c,o,i]);return Object(h.jsx)("div",{className:"container",children:Object(h.jsxs)("div",Object(l.a)(Object(l.a)({},n({style:s})),{},{children:[Object(h.jsx)("input",Object(l.a)({},r())),Object(h.jsx)("p",{children:e.message})]}))})}({message:e.message,setter:o});return e.file?S:C}var w=n(135),S=n(133),C=n(136),k=n(134),E=(n(103),n(44)),D=n.n(E),I=n(20);function N(e){return new Date(1e3*e).toISOString().substr(12,7)}var P=n(105),T=n(108),z={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"2px",margin:"2px",borderColor:"red",color:"red",borderStyle:"solid"},A={display:"flex",flexDirection:"row",alignSelf:"stretch",height:"100vh"};function F(e){var t,n,r=e.name,c=e.wing,i=Object(a.useState)(1),o=Object(s.a)(i,2),d=o[0],u=o[1],j=Object(a.useState)(!1),p=Object(s.a)(j,2),b=p[0],f=p[1],O=Object(a.useState)(!1),x=Object(s.a)(O,2),g=(x[0],x[1]),m=Object(a.useState)(),v=Object(s.a)(m,2),y=v[0],E=v[1];Object(a.useEffect)((function(){try{E(P.parse(e.igc,{lenient:!0}))}catch(t){console.error("Cannot parse",e.igc,t)}}),[e.igc]);var F=0,R=[],W=[],L=[],B=[],G=0,M=0;if(!y)return Object(h.jsx)("span",{children:"Fichier IGC ?"});for(var U=0;U<y.fixes.length&&U/y.fixes.length<d;U++){var Z=y.fixes[U],H=I.turnpoints[F];if(L.push([Z.latitude,Z.longitude]),H)if(T.getDistance(Z,H.waypoint)<H.radius){B.push(Z.time);var J=(D()("1970-01-01 ".concat(Z.time,"Z"))-D()("1970-01-01 ".concat(B[0],"Z")))/1e3,V="ESS"===H.type;(V||!G&&F===I.turnpoints.length-1)&&(V&&(M=F),G=J),R.push(Object(h.jsxs)("div",{style:Object(l.a)(Object(l.a)({},z),{},{color:"green",borderColor:"green",zIndex:U}),children:[Object(h.jsx)("small",{style:{color:"white"},children:H.waypoint.description}),Object(h.jsx)("small",{children:Z.time}),Object(h.jsx)("small",{style:{opacity:0===F?0:1,color:V?"white":"grey"},children:N(J)})]},"turnpoint-"+F));var q=[H.waypoint.lat,H.waypoint.lon];W.push(Object(h.jsx)(w.a,{center:q,pathOptions:{fillColor:"blue",color:"transparent",opacity:.25},radius:H.radius},"turnpoint-circle-"+F)),F++}}var Y=I.turnpoints.length===F,K={igc:e.igc,valid:Y,date:y.date,name:r,wing:c,duration:G};b||(fetch("https://lnk30ei5aj.execute-api.eu-west-3.amazonaws.com/dev/save",{method:"POST",body:JSON.stringify(K)}).then((function(e){g(e.ok)})).catch((function(e){return console.error("sending",e)})),f(!0));var X=function(e){R.push(Object(h.jsx)("pre",{style:{fontSize:14},children:e}))};X("Heure d\xe9but: ".concat(B[0])),M&&X("Heure ESS: ".concat(B[M])),Y?(X("Heure fin: ".concat(B.slice(-1)[0])),X("Dur\xe9e task: ".concat(N(G)))):X("Non valide"),X(b?"Envoy\xe9":", re\xe7u");for(var Q=I.turnpoints.length-1;Q>=F;Q--){var $="gray",_="FFF",ee=.25;Q===F&&($="orange",_="orange",ee=1);var te=I.turnpoints[Q];R.splice(F,0,Object(h.jsx)("div",{style:Object(l.a)(Object(l.a)({},z),{},{borderColor:$,zIndex:Q}),children:Object(h.jsx)("small",{children:te.waypoint.description})},"turnpoint-"+Q));var ne=[te.waypoint.lat,te.waypoint.lon];W.push(Object(h.jsx)(w.a,{center:ne,pathOptions:{color:$,fillColor:_,opacity:ee},radius:te.radius},"turnpoint-circle-"+Q))}var ae=I.turnpoints[0],re=[ae.waypoint.lat,ae.waypoint.lon],ce=null!==(t=null===(n=y.fixes[Math.round(y.fixes.length*d-1)])||void 0===n?void 0:n.time)&&void 0!==t?t:"Nan";return Object(h.jsxs)("div",{style:A,children:[Object(h.jsxs)("div",{style:{display:"flex",flexDirection:"column",overflow:"auto"},children:[Object(h.jsx)("h2",{children:"Challenge Charance"}),R]}),Object(h.jsxs)("div",{className:"rightHandContainer",style:{alignSelf:"stretch",width:"100%",display:"flex",flexDirection:"column",height:"100vh"},children:[Object(h.jsx)("div",{className:"mapContainer",style:{flexGrow:1,display:"flex"},children:Object(h.jsxs)(S.a,{center:re,zoom:13,scrollWheelZoom:!1,children:[Object(h.jsx)(C.a,{attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',url:"https://{s}.tile.jawg.io/jawg-terrain/{z}/{x}/{y}{r}.png?access-token=OCSVqPtVG4tEq4zlKGa0sA3LW6bC5l528PJhTuBSPZ5BPvbjemWIyzaHd15iYV11"})," ",W,Object(h.jsx)(k.a,{positions:L})]})}),Object(h.jsxs)("div",{className:"flightProgress",style:{height:"80px",backgroundColor:"blue",display:"flex"},children:[Object(h.jsx)("input",{type:"range",min:"1",max:"100",class:"slider",id:"myRange",style:{flexGrow:1},value:100*d,onChange:function(e){var t=e.target.value/100;u(t)}}),Object(h.jsx)("p",{children:ce})]})]})]})}var R={display:"flex",flexDirection:"row",alignItems:"center"};var W=function(){var e=Object(a.useState)(),t=Object(s.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(),i=Object(s.a)(c,2),o=i[0],l=i[1],d=Object(a.useState)(""),u=Object(s.a)(d,2),j=u[0],p=u[1],b=Object(a.useState)(!1),f=Object(s.a)(b,2),O=f[0],x=f[1];Object(a.useEffect)((function(){var e;l(null!==(e=localStorage.getItem("name"))&&void 0!==e?e:""),p(localStorage.getItem("wing"))}),[]),Object(a.useEffect)((function(){localStorage.setItem("name",o)}),[o]),Object(a.useEffect)((function(){localStorage.setItem("wing",j)}),[j]);var g=new URL(window.location);g.hash="";var m={margin:10,padding:5,fontSize:18};return O?Object(h.jsx)(F,{igc:n,name:o,wing:j}):Object(h.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[Object(h.jsx)("h1",{children:Object(h.jsx)("a",{href:g.toString(),style:{color:"white"},children:"Challenge Charance"})}),Object(h.jsx)("div",{style:R,children:Object(h.jsxs)("form",{action:"#",children:[Object(h.jsx)(y,{file:n,fileSetter:r,message:"Fichier igc"}),Object(h.jsx)("input",{style:m,type:"text",value:o,onChange:function(e){return l(e.target.value)},placeholder:"Nom Pr\xe9nom"}),Object(h.jsxs)("select",{style:m,name:"wing",onChange:function(e){return p(e.target.value)},value:j,children:[Object(h.jsx)("option",{value:"",children:"-"}),Object(h.jsx)("option",{value:"A",children:"EN-A"}),Object(h.jsx)("option",{value:"B",children:"EN-B"}),Object(h.jsx)("option",{value:"C",children:"EN-C"}),Object(h.jsx)("option",{value:"D",children:"EN-D"}),Object(h.jsx)("option",{value:"CCC",children:"CCC"})]}),Object(h.jsx)("br",{}),Object(h.jsx)("input",{style:m,type:"submit",value:"Envoyer",disabled:!o||!j||!n,onClick:function(){x(!0)}})]})})]})},L=n(2),B=n(25);function G(e){var t=e.type,n=Object(a.useState)(null),r=Object(s.a)(n,2),c=r[0],i=r[1],o=Object(a.useState)(!1),l=Object(s.a)(o,2),d=l[0],u=l[1];return d||(console.log("loading"),u(!0),fetch("https://lnk30ei5aj.execute-api.eu-west-3.amazonaws.com/dev/ranking/".concat(t),{method:"GET"}).then((function(e){return e.json()})).then((function(e){i(e.list),console.log(c)})).catch((function(e){return console.error("receiving",e)}))),Object(h.jsxs)("div",{style:{width:"600px",float:"left"},children:[Object(h.jsxs)("h2",{children:["Classement ",t]}),Object(h.jsx)("table",{style:{padding:10,textAlign:"left"},children:null===c||void 0===c?void 0:c.map((function(e,t){return Object(h.jsxs)("tr",{children:[Object(h.jsxs)("td",{style:{paddingRight:30},children:[t+1,"."]}),Object(h.jsx)("td",{style:{paddingRight:30},children:e.name}),Object(h.jsx)("td",{style:{paddingRight:30,fontSize:20},children:N(e.duration)}),Object(h.jsx)("td",{style:{paddingRight:30,fontSize:16},children:e.date})]})}))})]})}function M(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)(G,{type:"A"}),Object(h.jsx)(G,{type:"B"}),Object(h.jsx)(G,{type:"C"}),Object(h.jsx)(G,{type:"D"}),Object(h.jsx)(G,{type:"CCC"})]}),Object(h.jsx)("div",{style:{backgroundColor:"#ddd",padding:20,marginTop:30},children:Object(h.jsx)(B.b,{to:"/declaration",children:"Declarer un vol"})})]})}function U(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)("header",{className:"App-header",children:Object(h.jsxs)(L.c,{children:[Object(h.jsx)(L.a,{path:"/",element:Object(h.jsx)(M,{})}),Object(h.jsx)(L.a,{path:"/declaration",element:Object(h.jsx)(W,{})})]})})})}i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(B.a,{hashType:"noslash",children:Object(h.jsx)(U,{})})}),document.getElementById("root")),o()},20:function(e){e.exports=JSON.parse('{"version":1,"taskType":"CLASSIC","turnpoints":[{"radius":200,"waypoint":{"lon":6.0208001136779785,"lat":44.56801986694336,"altSmoothed":1517,"name":"WPT1","description":"D\xe9co","isUnknown":true},"type":"SSS"},{"radius":1500,"waypoint":{"lon":6.046289920806885,"lat":44.591468811035156,"altSmoothed":1643,"name":"WPT2","description":"Br\xeache","isUnknown":true}},{"radius":4450,"waypoint":{"lon":5.932980060577393,"lat":44.627140045166016,"altSmoothed":2647,"name":"WPT3","description":"Clappe","isUnknown":true}},{"radius":550,"waypoint":{"lon":5.994440078735352,"lat":44.551109313964844,"altSmoothed":1058,"name":"WPT4","description":"Corr\xe9o","isUnknown":true},"type":"ESS"},{"radius":3600,"waypoint":{"lon":6.046289920806885,"lat":44.591468811035156,"altSmoothed":1643,"name":"WPT2","description":"D\xe9co","isUnknown":true}}],"sss":{"type":"ELAPSED-TIME","direction":"EXIT","timeGates":["05:00:00Z"]},"goal":{"type":"CYLINDER","deadline":"21:00:00Z"},"earthModel":"WGS84"}')},68:function(e,t,n){},69:function(e,t,n){},78:function(e,t){},80:function(e,t){}},[[130,1,2]]]);
//# sourceMappingURL=main.dd50493b.chunk.js.map