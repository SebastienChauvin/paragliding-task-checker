(this["webpackJsonpparagliding-task-checker"]=this["webpackJsonpparagliding-task-checker"]||[]).push([[0],{125:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(29),s=n.n(i),c=(n(63),n(5)),o=(n(64),n(3)),l=n(12),d=n.n(l),u=n(30),p=n(58),j=n(1),f=n(67),h=f.compress,b=f.decompress,x={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"20px",borderWidth:2,borderRadius:2,borderColor:"#eeeeee",borderStyle:"dashed",backgroundColor:"#fafafa0F",color:"#bdbdbd",outline:"none",margin:10,transition:"border .24s ease-in-out"},g={borderColor:"#2196f3"},O={borderColor:"#00e676"},v={borderColor:"#ff1744"};function m(e){var t=Object(o.a)(Object(o.a)({},x),{},{color:"green",borderColor:"green"}),n=Object(r.useState)(),i=Object(c.a)(n,2),s=i[0],l=i[1],f=function(){var e=a.a.useState((function(){return window.location.hash})),t=Object(c.a)(e,2),n=t[0],r=t[1],i=a.a.useCallback((function(){r(window.location.hash)}),[]);a.a.useEffect((function(){return window.addEventListener("hashchange",i),function(){window.removeEventListener("hashchange",i)}}),[]);var s=a.a.useCallback((function(e){e!==n&&(window.location.hash=e)}),[n]);return[n,s]}(),m=Object(c.a)(f,2),y=m[0],w=m[1];Object(r.useEffect)((function(){function t(){return(t=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!s){e.next=5;break}return e.next=4,h(s);case 4:t=e.sent;case 5:w(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e.fileSetter(s),e.inUrl&&function(){t.apply(this,arguments)}()}),[s,e]),Object(r.useEffect)((function(){function t(){return(t=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=l,e.next=3,b(t);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}y&&e.inUrl&&function(e){t.apply(this,arguments)}(y)}),[y]);var C=Object(j.jsx)("div",{className:"container",style:t,children:Object(j.jsx)("p",{children:e.message+" \u2713"})}),k=function(e){var t=Object(p.a)({onDrop:function(){var t=Object(u.a)(d.a.mark((function t(n){var r,a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.length>0)){t.next=6;break}return r=n[0],t.next=4,r.text();case 4:a=t.sent,e.setter(a);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),n=t.getRootProps,a=t.getInputProps,i=t.isDragActive,s=t.isDragAccept,c=t.isDragReject,l=Object(r.useMemo)((function(){return Object(o.a)(Object(o.a)(Object(o.a)(Object(o.a)({},x),i?g:{}),s?O:{}),c?v:{})}),[i,c,s]);return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",Object(o.a)(Object(o.a)({},n({style:l})),{},{children:[Object(j.jsx)("input",Object(o.a)({},a())),Object(j.jsx)("p",{children:e.message})]}))})}({message:e.message,setter:l});return e.file?C:k}var y=n(130),w=n(128),C=n(131),k=n(129),S=(n(98),n(39)),D=n.n(S),I=n(100),P=n(103),N={flex:1,display:"flex",flexDirection:"column",alignItems:"center",padding:"2px",margin:"2px",borderColor:"red",color:"red",borderStyle:"solid"},F={display:"flex",flexDirection:"row",alignSelf:"stretch",height:"100vh"};function E(e){for(var t,n,a=JSON.parse(e.tsk),i=I.parse(e.igc),s=Object(r.useState)(1),l=Object(c.a)(s,2),d=l[0],u=l[1],p=0,f=[],h=[],b=[],x=[],g=a.sss.timeGates[0],O=!1,v=0;v<i.fixes.length&&v/i.fixes.length<d;v++){var m=i.fixes[v],S=a.turnpoints[p];if(!O&&D()("1970-01-01 "+m.time+"Z")<D()("1970-01-01 "+g))x.push([m.latitude,m.longitude]);else if(O=!0,b.push([m.latitude,m.longitude]),null!=S)if(P.getDistance(m,S.waypoint)<S.radius){f.push(Object(j.jsx)("div",{style:Object(o.a)(Object(o.a)({},N),{},{color:"green",borderColor:"green",zIndex:v}),children:Object(j.jsx)("small",{children:S.waypoint.description})},"turnpoint-"+p));var E=[S.waypoint.lat,S.waypoint.lon];h.push(Object(j.jsx)(y.a,{center:E,pathOptions:{fillColor:"blue",color:"transparent",opacity:.25},radius:S.radius},"turnpoint-circle-"+p)),p++}}for(var z=a.turnpoints.length-1;z>=p;z--){var A="gray",L="FFF",M=.25;z===p&&(A="orange",L="orange",M=1);var U=a.turnpoints[z];f.splice(p,0,Object(j.jsx)("div",{style:Object(o.a)(Object(o.a)({},N),{},{borderColor:A,zIndex:z}),children:Object(j.jsx)("small",{children:U.waypoint.description})},"turnpoint-"+z));var G=[U.waypoint.lat,U.waypoint.lon];h.push(Object(j.jsx)(y.a,{center:G,pathOptions:{color:A,fillColor:L,opacity:M},radius:U.radius},"turnpoint-circle-"+z))}var R=a.turnpoints[0],T=[R.waypoint.lat,R.waypoint.lon],B=null!==(t=null===(n=i.fixes[Math.round(i.fixes.length*d-1)])||void 0===n?void 0:n.time)&&void 0!==t?t:"Nan";return Object(j.jsxs)("div",{style:F,children:[Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",overflow:"auto"},children:[Object(j.jsx)("h2",{children:"All turnpoints"}),f]}),Object(j.jsxs)("div",{className:"rightHandContainer",style:{alignSelf:"stretch",width:"100%",display:"flex",flexDirection:"column",height:"100vh"},children:[Object(j.jsx)("div",{className:"mapContainer",style:{flexGrow:1,display:"flex"},children:Object(j.jsxs)(w.a,{center:T,zoom:13,scrollWheelZoom:!1,children:[Object(j.jsx)(C.a,{attribution:'\xa9 <a href="https://stadiamaps.com/">Stadia Maps</a>, \xa9 <a href="https://openmaptiles.org/">OpenMapTiles</a> \xa9 <a href="http://openstreetmap.org">OpenStreetMap</a> contributors',url:"https://{s}.tile.jawg.io/jawg-terrain/{z}/{x}/{y}{r}.png?access-token=OCSVqPtVG4tEq4zlKGa0sA3LW6bC5l528PJhTuBSPZ5BPvbjemWIyzaHd15iYV11"}),"                    ",h,Object(j.jsx)(k.a,{positions:x,color:"gray"}),Object(j.jsx)(k.a,{positions:b})]})}),Object(j.jsxs)("div",{className:"flightProgress",style:{height:"80px",backgroundColor:"blue",display:"flex"},children:[Object(j.jsx)("input",{type:"range",min:"1",max:"100",class:"slider",id:"myRange",style:{flexGrow:1},value:100*d,onChange:function(e){var t=e.target.value/100;u(t)}}),Object(j.jsx)("p",{children:B})]})]})]})}var z={display:"flex",flexDirection:"row",alignItems:"center"};var A=function(){var e=Object(r.useState)(),t=Object(c.a)(e,2),n=t[0],a=t[1],i=Object(r.useState)(),s=Object(c.a)(i,2),o=s[0],l=s[1],d=m({message:"Upload igc file",file:n,fileSetter:a}),u=m({message:"Upload xctsk",file:o,fileSetter:l,inUrl:!0}),p=new URL(window.location);p.hash="";var f=Object(j.jsxs)("div",{style:{display:"flex",alignItems:"center",flexDirection:"column"},children:[Object(j.jsx)("h1",{children:Object(j.jsx)("a",{href:p.toString(),style:{color:"white"},children:"Paraglider Task Checker"})}),Object(j.jsxs)("div",{style:z,children:[d,u]})]});return null!=o&&null!=n&&(f=Object(j.jsx)(E,{tsk:o,igc:n})),Object(j.jsx)("div",{className:"App",children:Object(j.jsx)("header",{className:"App-header",children:f})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))};s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(A,{})}),document.getElementById("root")),L()},63:function(e,t,n){},64:function(e,t,n){},73:function(e,t){},75:function(e,t){}},[[125,1,2]]]);
//# sourceMappingURL=main.663cdf7d.chunk.js.map